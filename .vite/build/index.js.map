{"version":3,"file":"index.js","sources":["../../src/preload/index.ts"],"sourcesContent":["import { contextBridge, ipcRenderer } from 'electron';\r\n\r\n/**\r\n * Type definitions for IPC arguments and responses.\r\n */\r\ninterface ScanArgs {\r\n  source: string;\r\n  dest: string;\r\n  rootOnly: boolean;\r\n}\r\n\r\ninterface TreeNode {\r\n  path: string;\r\n  name: string;\r\n  isDir: boolean;\r\n  state: string;\r\n  hasChildren: boolean;\r\n  modeAtPath: string;\r\n}\r\n\r\ninterface ScanStats {\r\n  directoriesScanned: number;\r\n  ruleFilesFound: number;\r\n  conflictsFound: number;\r\n}\r\n\r\ninterface ScanResponse {\r\n  scanId: string;\r\n  conflicts: string[];\r\n  rootNode: TreeNode;\r\n  stats: ScanStats;\r\n}\r\n\r\ninterface ListChildrenArgs {\r\n  scanId: string;\r\n  dirPath: string;\r\n}\r\n\r\ninterface ListChildrenResponse {\r\n  children: TreeNode[];\r\n}\r\n\r\ninterface ExplainArgs {\r\n  scanId: string;\r\n  nodePath: string;\r\n}\r\n\r\ninterface PatternEntry {\r\n  patternText: string;\r\n  lineNumber: number;\r\n  ruleFilePath: string;\r\n}\r\n\r\ninterface ExplainData {\r\n  path: string;\r\n  name: string;\r\n  decision: string;\r\n  mode: string;\r\n  ruleChain: string[];\r\n  matchingPatterns: PatternEntry[];\r\n}\r\n\r\ninterface ExplainResponse {\r\n  explain: ExplainData;\r\n}\r\n\r\n/**\r\n * Exposes a safe API to the renderer process via contextBridge.\r\n * The renderer accesses these methods via `window.electronAPI`.\r\n */\r\ncontextBridge.exposeInMainWorld('electronAPI', {\r\n  selectFolder: (args: { kind: string }): Promise<{ path: string | null }> =>\r\n    ipcRenderer.invoke('selectFolder', args),\r\n  \r\n  scan: (args: ScanArgs): Promise<ScanResponse> =>\r\n    ipcRenderer.invoke('scan', args),\r\n  \r\n  listChildren: (args: ListChildrenArgs): Promise<ListChildrenResponse> =>\r\n    ipcRenderer.invoke('listChildren', args),\r\n  \r\n  explain: (args: ExplainArgs): Promise<ExplainResponse> =>\r\n    ipcRenderer.invoke('explain', args),\r\n  \r\n  openInExplorer: (args: { dirPath: string }): Promise<{ success: boolean }> =>\r\n    ipcRenderer.invoke('openInExplorer', args),\r\n  \r\n  copyToClipboard: (args: { text: string }): Promise<{ success: boolean }> =>\r\n    ipcRenderer.invoke('copyToClipboard', args),\r\n});\r\n"],"names":["contextBridge","ipcRenderer"],"mappings":";;AAsEAA,SAAAA,cAAc,kBAAkB,eAAe;AAAA,EAC7C,cAAc,CAAC,SACbC,SAAAA,YAAY,OAAO,gBAAgB,IAAI;AAAA,EAEzC,MAAM,CAAC,SACLA,SAAAA,YAAY,OAAO,QAAQ,IAAI;AAAA,EAEjC,cAAc,CAAC,SACbA,SAAAA,YAAY,OAAO,gBAAgB,IAAI;AAAA,EAEzC,SAAS,CAAC,SACRA,SAAAA,YAAY,OAAO,WAAW,IAAI;AAAA,EAEpC,gBAAgB,CAAC,SACfA,SAAAA,YAAY,OAAO,kBAAkB,IAAI;AAAA,EAE3C,iBAAiB,CAAC,SAChBA,SAAAA,YAAY,OAAO,mBAAmB,IAAI;AAC9C,CAAC;"}